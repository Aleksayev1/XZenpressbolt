import React, { createContext, useContext, useState } from 'react';
import { Language } from '../types';

interface LanguageContextType {
  currentLanguage: Language;
  setLanguage: (language: Language) => void;
  t: (key: string) => string;
}

const languages: Language[] = [
  { code: 'pt', name: 'Portugu√™s', flag: 'üáßüá∑' },
  { code: 'en', name: 'English', flag: 'üá∫üá∏' },
  { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
  { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
];

const translations: Record<string, Record<string, string>> = {
  pt: {
    // Navigation
    'nav.home': 'In√≠cio',
    'nav.acupressure': 'Acupress√£o',
    'nav.breathing': 'Respira√ß√£o',
    'nav.premium': 'Premium',
    'nav.login': 'Entrar',
    'nav.logout': 'Sair',
    
    // Breathing Exercise
    'breathing.title': 'T√©cnica de Respira√ß√£o 4-7-8',
    'breathing.inhale': 'Inspire',
    'breathing.hold': 'Segure',
    'breathing.exhale': 'Expire',
    'breathing.start': 'Iniciar Sess√£o',
    'breathing.stop': 'Parar',
    'breathing.reset': 'Reset',
    'breathing.totalTime': 'Tempo Total',
    
    // Chromotherapy
    'breathing.chromotherapy.title': 'Cromoterapia Integrada',
    'breathing.chromotherapy.description': 'Cada cor possui propriedades terap√™uticas espec√≠ficas que potencializam os benef√≠cios da respira√ß√£o 4-7-8',
    'breathing.chromotherapy.blue': 'Azul - Calma e Tranquilidade',
    'breathing.chromotherapy.blue.desc': 'Durante a inspira√ß√£o, o azul promove relaxamento profundo e reduz a ansiedade.',
    'breathing.chromotherapy.green': 'Verde - Equil√≠brio e Harmonia',
    'breathing.chromotherapy.green.desc': 'Na reten√ß√£o, o verde equilibra o sistema nervoso e promove estabilidade emocional.',
    'breathing.chromotherapy.magenta': 'Magenta - Renova√ß√£o e Energia',
    'breathing.chromotherapy.magenta.desc': 'Na expira√ß√£o, o magenta facilita a libera√ß√£o de tens√µes e renova a energia vital.',
    'breathing.chromotherapy.blue.short': 'Azul da Calma',
    'breathing.chromotherapy.green.short': 'Verde do Equil√≠brio',
    'breathing.chromotherapy.magenta.short': 'Magenta da Renova√ß√£o',
    
    // Benefits
    'breathing.benefits.title': 'Benef√≠cios da T√©cnica 4-7-8',
    'breathing.benefits.stress': 'Reduz estresse e ansiedade',
    'breathing.benefits.sleep': 'Melhora qualidade do sono',
    'breathing.benefits.focus': 'Aumenta foco e concentra√ß√£o',
    'breathing.benefits.pressure': 'Regula press√£o arterial',
    
    // Sounds
    'breathing.sounds.title': 'Sons Harmonizantes',
    'breathing.sounds.free.title': 'üéµ Sons Gratuitos',
    'breathing.sounds.premium.title': 'üéº Sons Premium',
    'breathing.sounds.ocean': 'Sons do Mar',
    'breathing.sounds.ocean.desc': 'Ondas relaxantes do oceano',
    'breathing.sounds.rain': 'Chuva Suave',
    'breathing.sounds.rain.desc': 'Som calmante de chuva',
    'breathing.sounds.forest': 'Floresta',
    'breathing.sounds.fireplace': 'Lareira',
    'breathing.sounds.classical': 'M√∫sica Cl√°ssica',
    'breathing.sounds.mantras': 'Mantras',
    'breathing.sounds.more': '+ 46 mais',
    'breathing.sounds.play': 'Reproduzir',
    'breathing.sounds.pause': 'Pausar',
    'breathing.sounds.stop': 'Parar Tudo',
    'breathing.sounds.volume': 'Volume',
    'breathing.sounds.premium.desc': 'Desbloqueie nossa biblioteca completa com mais de 50 sons relaxantes e integra√ß√£o com Spotify Premium',
    'breathing.sounds.premium.upgrade': 'Fazer Upgrade',
    'breathing.sounds.premium.spotify': 'Spotify Premium',
    
    // Science
    'breathing.science.title': 'Base Cient√≠fica da T√©cnica 4-7-8',
    'breathing.science.evidence': 'Evid√™ncias Cient√≠ficas',
    'breathing.science.chromotherapy': 'Cromoterapia Cient√≠fica',
    'breathing.science.parasympathetic': 'Ativa o sistema nervoso parassimp√°tico',
    'breathing.science.cortisol': 'Reduz cortisol (horm√¥nio do estresse)',
    'breathing.science.heartRate': 'Melhora variabilidade da frequ√™ncia card√≠aca',
    'breathing.science.gaba': 'Aumenta produ√ß√£o de GABA (neurotransmissor calmante)',
    'breathing.science.blue.effect': 'Azul: Reduz press√£o arterial e frequ√™ncia card√≠aca',
    'breathing.science.green.effect': 'Verde: Equilibra sistema nervoso aut√¥nomo',
    'breathing.science.magenta.effect': 'Magenta: Estimula libera√ß√£o de endorfinas',
    'breathing.science.melatonin': 'Cores influenciam produ√ß√£o de melatonina',
    
    // Phase details
    'breathing.phase': 'Fase',
    'breathing.phase.inhale.detail': 'Inspira√ß√£o (4 segundos)',
    'breathing.phase.hold.detail': 'Reten√ß√£o (7 segundos)',
    'breathing.phase.exhale.detail': 'Expira√ß√£o (8 segundos)',
  },
  en: {
    // Navigation
    'nav.home': 'Home',
    'nav.acupressure': 'Acupressure',
    'nav.breathing': 'Breathing',
    'nav.premium': 'Premium',
    'nav.login': 'Login',
    'nav.logout': 'Logout',
    
    // Breathing Exercise
    'breathing.title': '4-7-8 Breathing Technique',
    'breathing.inhale': 'Inhale',
    'breathing.hold': 'Hold',
    'breathing.exhale': 'Exhale',
    'breathing.start': 'Start Session',
    'breathing.stop': 'Stop',
    'breathing.reset': 'Reset',
    'breathing.totalTime': 'Total Time',
    
    // Chromotherapy
    'breathing.chromotherapy.title': 'Integrated Chromotherapy',
    'breathing.chromotherapy.description': 'Each color has specific therapeutic properties that enhance the benefits of 4-7-8 breathing',
    'breathing.chromotherapy.blue': 'Blue - Calm and Tranquility',
    'breathing.chromotherapy.blue.desc': 'During inhalation, blue promotes deep relaxation and reduces anxiety.',
    'breathing.chromotherapy.green': 'Green - Balance and Harmony',
    'breathing.chromotherapy.green.desc': 'During retention, green balances the nervous system and promotes emotional stability.',
    'breathing.chromotherapy.magenta': 'Magenta - Renewal and Energy',
    'breathing.chromotherapy.magenta.desc': 'During exhalation, magenta facilitates tension release and renews vital energy.',
    'breathing.chromotherapy.blue.short': 'Blue of Calm',
    'breathing.chromotherapy.green.short': 'Green of Balance',
    'breathing.chromotherapy.magenta.short': 'Magenta of Renewal',
    
    // Benefits
    'breathing.benefits.title': 'Benefits of 4-7-8 Technique',
    'breathing.benefits.stress': 'Reduces stress and anxiety',
    'breathing.benefits.sleep': 'Improves sleep quality',
    'breathing.benefits.focus': 'Increases focus and concentration',
    'breathing.benefits.pressure': 'Regulates blood pressure',
    
    // Sounds
    'breathing.sounds.title': 'Harmonizing Sounds',
    'breathing.sounds.free.title': 'üéµ Free Sounds',
    'breathing.sounds.premium.title': 'üéº Premium Sounds',
    'breathing.sounds.ocean': 'Ocean Sounds',
    'breathing.sounds.ocean.desc': 'Relaxing ocean waves',
    'breathing.sounds.rain': 'Gentle Rain',
    'breathing.sounds.rain.desc': 'Calming rain sound',
    'breathing.sounds.forest': 'Forest',
    'breathing.sounds.fireplace': 'Fireplace',
    'breathing.sounds.classical': 'Classical Music',
    'breathing.sounds.mantras': 'Mantras',
    'breathing.sounds.more': '+ 46 more',
    'breathing.sounds.play': 'Play',
    'breathing.sounds.pause': 'Pause',
    'breathing.sounds.stop': 'Stop All',
    'breathing.sounds.volume': 'Volume',
    'breathing.sounds.premium.desc': 'Unlock our complete library with over 50 relaxing sounds and Spotify Premium integration',
    'breathing.sounds.premium.upgrade': 'Upgrade Now',
    'breathing.sounds.premium.spotify': 'Spotify Premium',
    
    // Science
    'breathing.science.title': 'Scientific Basis of 4-7-8 Technique',
    'breathing.science.evidence': 'Scientific Evidence',
    'breathing.science.chromotherapy': 'Scientific Chromotherapy',
    'breathing.science.parasympathetic': 'Activates parasympathetic nervous system',
    'breathing.science.cortisol': 'Reduces cortisol (stress hormone)',
    'breathing.science.heartRate': 'Improves heart rate variability',
    'breathing.science.gaba': 'Increases GABA production (calming neurotransmitter)',
    'breathing.science.blue.effect': 'Blue: Reduces blood pressure and heart rate',
    'breathing.science.green.effect': 'Green: Balances autonomic nervous system',
    'breathing.science.magenta.effect': 'Magenta: Stimulates endorphin release',
    'breathing.science.melatonin': 'Colors influence melatonin production',
    
    // Phase details
    'breathing.phase': 'Phase',
    'breathing.phase.inhale.detail': 'Inhalation (4 seconds)',
    'breathing.phase.hold.detail': 'Retention (7 seconds)',
    'breathing.phase.exhale.detail': 'Exhalation (8 seconds)',
  },
  es: {
    // Navigation
    'nav.home': 'Inicio',
    'nav.acupressure': 'Acupresi√≥n',
    'nav.breathing': 'Respiraci√≥n',
    'nav.premium': 'Premium',
    'nav.login': 'Iniciar Sesi√≥n',
    'nav.logout': 'Cerrar Sesi√≥n',
    
    // Breathing Exercise
    'breathing.title': 'T√©cnica de Respiraci√≥n 4-7-8',
    'breathing.inhale': 'Inhalar',
    'breathing.hold': 'Mantener',
    'breathing.exhale': 'Exhalar',
    'breathing.start': 'Iniciar Sesi√≥n',
    'breathing.stop': 'Parar',
    'breathing.reset': 'Reset',
    'breathing.totalTime': 'Tiempo Total',
    
    // Chromotherapy
    'breathing.chromotherapy.title': 'Cromoterapia Integrada',
    'breathing.chromotherapy.description': 'Cada color tiene propiedades terap√©uticas espec√≠ficas que potencian los beneficios de la respiraci√≥n 4-7-8',
    'breathing.chromotherapy.blue': 'Azul - Calma y Tranquilidad',
    'breathing.chromotherapy.blue.desc': 'Durante la inhalaci√≥n, el azul promueve relajaci√≥n profunda y reduce la ansiedad.',
    'breathing.chromotherapy.green': 'Verde - Equilibrio y Armon√≠a',
    'breathing.chromotherapy.green.desc': 'Durante la retenci√≥n, el verde equilibra el sistema nervioso y promueve estabilidad emocional.',
    'breathing.chromotherapy.magenta': 'Magenta - Renovaci√≥n y Energ√≠a',
    'breathing.chromotherapy.magenta.desc': 'Durante la exhalaci√≥n, el magenta facilita la liberaci√≥n de tensiones y renueva la energ√≠a vital.',
    'breathing.chromotherapy.blue.short': 'Azul de la Calma',
    'breathing.chromotherapy.green.short': 'Verde del Equilibrio',
    'breathing.chromotherapy.magenta.short': 'Magenta de la Renovaci√≥n',
    
    // Benefits
    'breathing.benefits.title': 'Beneficios de la T√©cnica 4-7-8',
    'breathing.benefits.stress': 'Reduce estr√©s y ansiedad',
    'breathing.benefits.sleep': 'Mejora calidad del sue√±o',
    'breathing.benefits.focus': 'Aumenta enfoque y concentraci√≥n',
    'breathing.benefits.pressure': 'Regula presi√≥n arterial',
    
    // Sounds
    'breathing.sounds.title': 'Sonidos Armonizantes',
    'breathing.sounds.free.title': 'üéµ Sonidos Gratuitos',
    'breathing.sounds.premium.title': 'üéº Sonidos Premium',
    'breathing.sounds.ocean': 'Sonidos del Mar',
    'breathing.sounds.ocean.desc': 'Olas relajantes del oc√©ano',
    'breathing.sounds.rain': 'Lluvia Suave',
    'breathing.sounds.rain.desc': 'Sonido calmante de lluvia',
    'breathing.sounds.forest': 'Bosque',
    'breathing.sounds.fireplace': 'Chimenea',
    'breathing.sounds.classical': 'M√∫sica Cl√°sica',
    'breathing.sounds.mantras': 'Mantras',
    'breathing.sounds.more': '+ 46 m√°s',
    'breathing.sounds.play': 'Reproducir',
    'breathing.sounds.pause': 'Pausar',
    'breathing.sounds.stop': 'Parar Todo',
    'breathing.sounds.volume': 'Volumen',
    'breathing.sounds.premium.desc': 'Desbloquea nuestra biblioteca completa con m√°s de 50 sonidos relajantes e integraci√≥n con Spotify Premium',
    'breathing.sounds.premium.upgrade': 'Actualizar Ahora',
    'breathing.sounds.premium.spotify': 'Spotify Premium',
    
    // Science
    'breathing.science.title': 'Base Cient√≠fica de la T√©cnica 4-7-8',
    'breathing.science.evidence': 'Evidencia Cient√≠fica',
    'breathing.science.chromotherapy': 'Cromoterapia Cient√≠fica',
    'breathing.science.parasympathetic': 'Activa el sistema nervioso parasimp√°tico',
    'breathing.science.cortisol': 'Reduce cortisol (hormona del estr√©s)',
    'breathing.science.heartRate': 'Mejora variabilidad de frecuencia card√≠aca',
    'breathing.science.gaba': 'Aumenta producci√≥n de GABA (neurotransmisor calmante)',
    'breathing.science.blue.effect': 'Azul: Reduce presi√≥n arterial y frecuencia card√≠aca',
    'breathing.science.green.effect': 'Verde: Equilibra sistema nervioso aut√≥nomo',
    'breathing.science.magenta.effect': 'Magenta: Estimula liberaci√≥n de endorfinas',
    'breathing.science.melatonin': 'Los colores influyen en la producci√≥n de melatonina',
    
    // Phase details
    'breathing.phase': 'Fase',
    'breathing.phase.inhale.detail': 'Inhalaci√≥n (4 segundos)',
    'breathing.phase.hold.detail': 'Retenci√≥n (7 segundos)',
    'breathing.phase.exhale.detail': 'Exhalaci√≥n (8 segundos)',
  },
  fr: {
    // Navigation
    'nav.home': 'Accueil',
    'nav.acupressure': 'Acupression',
    'nav.breathing': 'Respiration',
    'nav.premium': 'Premium',
    'nav.login': 'Connexion',
    'nav.logout': 'D√©connexion',
    
    // Breathing Exercise
    'breathing.title': 'Technique de Respiration 4-7-8',
    'breathing.inhale': 'Inspirer',
    'breathing.hold': 'Retenir',
    'breathing.exhale': 'Expirer',
    'breathing.start': 'Commencer la Session',
    'breathing.stop': 'Arr√™ter',
    'breathing.reset': 'Reset',
    'breathing.totalTime': 'Temps Total',
    
    // Chromotherapy
    'breathing.chromotherapy.title': 'Chromoth√©rapie Int√©gr√©e',
    'breathing.chromotherapy.description': 'Chaque couleur poss√®de des propri√©t√©s th√©rapeutiques sp√©cifiques qui potentialisent les bienfaits de la respiration 4-7-8',
    'breathing.chromotherapy.blue': 'Bleu - Calme et Tranquillit√©',
    'breathing.chromotherapy.blue.desc': 'Pendant l\'inspiration, le bleu favorise la relaxation profonde et r√©duit l\'anxi√©t√©.',
    'breathing.chromotherapy.green': 'Vert - √âquilibre et Harmonie',
    'breathing.chromotherapy.green.desc': 'Pendant la r√©tention, le vert √©quilibre le syst√®me nerveux et favorise la stabilit√© √©motionnelle.',
    'breathing.chromotherapy.magenta': 'Magenta - Renouveau et √ânergie',
    'breathing.chromotherapy.magenta.desc': 'Pendant l\'expiration, le magenta facilite la lib√©ration des tensions et renouvelle l\'√©nergie vitale.',
    'breathing.chromotherapy.blue.short': 'Bleu du Calme',
    'breathing.chromotherapy.green.short': 'Vert de l\'√âquilibre',
    'breathing.chromotherapy.magenta.short': 'Magenta du Renouveau',
    
    // Benefits
    'breathing.benefits.title': 'B√©n√©fices de la Technique 4-7-8',
    'breathing.benefits.stress': 'R√©duit stress et anxi√©t√©',
    'breathing.benefits.sleep': 'Am√©liore qualit√© du sommeil',
    'breathing.benefits.focus': 'Augmente concentration et focus',
    'breathing.benefits.pressure': 'R√©gule tension art√©rielle',
    
    // Sounds
    'breathing.sounds.title': 'Sons Harmonisants',
    'breathing.sounds.free.title': 'üéµ Sons Gratuits',
    'breathing.sounds.premium.title': 'üéº Sons Premium',
    'breathing.sounds.ocean': 'Sons de l\'Oc√©an',
    'breathing.sounds.ocean.desc': 'Vagues relaxantes de l\'oc√©an',
    'breathing.sounds.rain': 'Pluie Douce',
    'breathing.sounds.rain.desc': 'Son calmant de pluie',
    'breathing.sounds.forest': 'For√™t',
    'breathing.sounds.fireplace': 'Chemin√©e',
    'breathing.sounds.classical': 'Musique Classique',
    'breathing.sounds.mantras': 'Mantras',
    'breathing.sounds.more': '+ 46 de plus',
    'breathing.sounds.play': 'Jouer',
    'breathing.sounds.pause': 'Pause',
    'breathing.sounds.stop': 'Arr√™ter Tout',
    'breathing.sounds.volume': 'Volume',
    'breathing.sounds.premium.desc': 'D√©bloquez notre biblioth√®que compl√®te avec plus de 50 sons relaxants et int√©gration Spotify Premium',
    'breathing.sounds.premium.upgrade': 'Mettre √† Niveau',
    'breathing.sounds.premium.spotify': 'Spotify Premium',
    
    // Science
    'breathing.science.title': 'Base Scientifique de la Technique 4-7-8',
    'breathing.science.evidence': 'Preuves Scientifiques',
    'breathing.science.chromotherapy': 'Chromoth√©rapie Scientifique',
    'breathing.science.parasympathetic': 'Active le syst√®me nerveux parasympathique',
    'breathing.science.cortisol': 'R√©duit le cortisol (hormone du stress)',
    'breathing.science.heartRate': 'Am√©liore la variabilit√© de la fr√©quence cardiaque',
    'breathing.science.gaba': 'Augmente la production de GABA (neurotransmetteur calmant)',
    'breathing.science.blue.effect': 'Bleu: R√©duit tension art√©rielle et fr√©quence cardiaque',
    'breathing.science.green.effect': 'Vert: √âquilibre syst√®me nerveux autonome',
    'breathing.science.magenta.effect': 'Magenta: Stimule lib√©ration d\'endorphines',
    'breathing.science.melatonin': 'Les couleurs influencent la production de m√©latonine',
    
    // Phase details
    'breathing.phase': 'Phase',
    'breathing.phase.inhale.detail': 'Inspiration (4 secondes)',
    'breathing.phase.hold.detail': 'R√©tention (7 secondes)',
    'breathing.phase.exhale.detail': 'Expiration (8 secondes)',
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [currentLanguage, setCurrentLanguage] = useState<Language>(() => {
    const savedLanguage = localStorage.getItem('language');
    return languages.find(lang => lang.code === savedLanguage) || languages[0];
  });

  const setLanguage = (language: Language) => {
    setCurrentLanguage(language);
    localStorage.setItem('language', language.code);
  };

  const t = (key: string): string => {
    return translations[currentLanguage.code]?.[key] || key;
  };

  return (
    <LanguageContext.Provider value={{ currentLanguage, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export { languages };